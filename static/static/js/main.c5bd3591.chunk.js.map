{"version":3,"sources":["utils.js","web_socket.js","components/player.js","components/background.js","components/monsters.js","components/items.js","components/player_editor.js","App.js","serviceWorker.js","index.js"],"names":["hostname","window","location","href","split","http_prefix","sleep","ms","Promise","resolve","setTimeout","WebSocketConnection","this","objectEventBus","require","url","console","log","ws","WebSocket","onopen","onmessage","evt","message","JSON","parse","data","processMessage","onclose","a","id","email","firstName","lastName","waitForConn","s","send","d","callback","readyState","msg","undefined","player_id","playerId","emit","p","x","y","web_socket_connection","Player","is_mounted","debouncedMovePlayer","_","debounce","key","e","wait","movePlayer","leading","maxWait","sendFullStateRequest","props","app","setPage","background","current","updateChunks","sendPlayerMove","handleKeys","onKeyEvent","React","Component","Square","pixel","color","r","g","b","style","width","height","left","chunkPosition","top","backgroundColor","position","Chunk","SIZE","chunk","pixels","forEach","push","squaresTall","Math","ceil","innerHeight","squaresWide","innerWidth","offsetX","playerPosition","floor","offsetY","className","border","size","backgroundSquares","Background","CHUNKSIZE","state","chunkData","on","setState","objects","fetch","then","res","json","pp","minX","minY","maxX","maxY","chunksWide","chunksTall","xIndex","Array","keys","yIndex","requestChunk","solid","chunks","Object","Monster","monster","images","src","length","alt","type","z","health","zIndex","Monsters","monsters","m","action","values","makeObject","o","Item","item","is_carried","dropped_image","Items","items","bind","SlotTypes","1","2","3","4","5","6","7","8","BACKPACK","GROUND","DraggableItem","useDrag","allowed_slot","end","monitor","dropResult","getDropResult","name","unequipItem","dropItem","equipItem","collect","isDragging","drag","preview","DragPreviewImage","connect","ref","ItemSlot","useDrop","accept","slot","drop","isOver","canDrop","BackpackSlot","GroundSlot","Backpack","PlayerEditorEquip","silhouette_style","equipped_items","equipped_image","transform","right","Ground","PlayerEditor","sendBackpackRequest","is_equipped","textAlign","float","DndProvider","backend","HTML5Backend","equippedItems","backpackItems","groundItems","App","accessToken","googleId","page","createRef","player","profileObj","givenName","familyName","sendAccessToken","margin","paddingTop","clientId","onSuccess","loginSuccess","isSignedIn","renderLogin","renderGame","renderInventory","Boolean","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error"],"mappings":"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","file":"static/js/main.c5bd3591.chunk.js","sourcesContent":["function hostname() {\n    let hostname = window.location.href.split(\"/\")[2]\n    if(hostname===\"localhost:3000\"){\n        return \"localhost:2305\"\n    }\n    return hostname\n}\n\nfunction ws_prefix() {\n    if(hostname()===\"localhost:2305\"){\n        return \"ws\"\n    }\n    return \"wss\"\n}\n\nfunction http_prefix() {\n    if(hostname()===\"localhost:2305\"){\n        return \"http\"\n    }\n    return \"https\"\n}\n\nexport {hostname, ws_prefix, http_prefix}","import {hostname, ws_prefix} from \"./utils\";\n\nfunction sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nclass WebSocketConnection {\n\n    sendAccessToken(a,id, email,firstName, lastName){\n        this.waitForConn(\n            () => {\n                let s = `{\"accessToken\":\"${a}\", \"googleId\":\"${id}\", \"email\":\"${email}\", \"firstName\":\"${firstName}\", \"lastName\":\"${lastName}\"}`\n                this.ws.send(s)\n            })\n    }\n\n    sendBackpackRequest(){\n        this.waitForConn(\n            () => {\n                this.ws.send(`{\"backpack\":\"please\"}`)\n            }\n        )\n\n    }\n\n    sendFullStateRequest(){\n        this.waitForConn(\n            () => {\n                this.ws.send(`{\"full_state\":\"please\"}`)\n            }\n        )\n\n    }\n\n    sendPlayerMove(d){\n        this.waitForConn(\n            () => {\n                this.ws.send(`{\"direction\":\"${d}\"}`)\n            })\n    }\n\n    equipItem(id) {\n        this.waitForConn(\n            () => {\n                this.ws.send(`{\"equip_item\":${id}}`)\n            })\n    }\n\n    unequipItem(id) {\n        this.waitForConn(\n            () => {\n                this.ws.send(`{\"unequip_item\":${id}}`)\n            })\n    }\n\n    dropItem(id) {\n        this.waitForConn(\n            () => {\n                this.ws.send(`{\"drop_item\":${id}}`)\n            })\n    }\n\n    async waitForConn(callback){\n        while(this.ws.readyState !== 1){\n            await sleep(1);\n        }\n        callback()\n    }\n\n    processMessage(msg) {\n\n        // item\n        if(msg[\"equipped_image\"] !== undefined){\n            this.objectEventBus.emit(\"item\", null, msg)\n            return\n        }\n\n        // player-id\n        if(msg[\"playerId\"] !== undefined){\n            player_id = msg.playerId\n            this.objectEventBus.emit(\"player_id\", null, msg)\n            return\n        }\n\n        // monster update\n        if(msg[\"type\"] !== undefined){\n            this.objectEventBus.emit(\"monster\", null, msg)\n            if(msg.id === player_id){\n                let p = {x:msg.x, y:msg.y}\n                this.objectEventBus.emit(\"player_position\", null, p)\n            }\n            return\n        }\n\n        console.log(\"unknown msg\", msg)\n\n    }\n\n    constructor() {\n        this.objectEventBus = require('js-event-bus')();\n\n        let url = `${ws_prefix()}://${hostname()}/objects`\n        console.log(url)\n        this.ws = new WebSocket(url)\n\n        this.ws.onopen = () => {\n            console.log('connected to generic ws')\n        }\n\n        this.ws.onmessage = evt => {\n            const message = JSON.parse(evt.data)\n            this.processMessage(message)\n        }\n\n        this.ws.onclose = () => {\n            console.log('disconnected generic ws')\n        }\n    }\n}\n\nlet player_id = null\nlet web_socket_connection = new WebSocketConnection()\n\nexport default web_socket_connection","import React from \"react\";\nimport _ from \"lodash\";\nimport KeyboardEventHandler from \"react-keyboard-event-handler\";\nimport web_socket_connection from \"../web_socket\";\n\nclass Player extends React.Component {\n\n    is_mounted = false\n\n    componentWillUnmount() {\n        this.is_mounted = false\n    }\n    componentDidMount() {\n        this.is_mounted = true\n        web_socket_connection.sendFullStateRequest()\n    }\n\n    movePlayer(key, e) {\n        if (key === \"e\") {\n            this.props.app.setPage(\"inventory\")\n        } else {\n            if (key === \"w\") key = \"up\"\n            if (key === \"a\") key = \"left\"\n            if (key === \"s\") key = \"down\"\n            if (key === \"d\") key = \"right\"\n            this.props.background.current.updateChunks()\n            web_socket_connection.sendPlayerMove(key)\n        }\n    }\n\n    debouncedMovePlayer = _.debounce( (key, e, wait) => {\n        this.movePlayer(key, e)\n    }, 350, {leading:true, maxWait:350})\n\n    render(){\n        return <>\n            <KeyboardEventHandler\n                handleKeys={[\"left\", \"right\", \"up\", \"down\", \"w\", \"a\", \"s\", \"d\", \"e\"]}\n                onKeyEvent={(key, e) => {\n                    this.debouncedMovePlayer(key, e, 100)\n                }}\n            />\n        </>\n    }\n}\n\nexport {Player}","import React from \"react\";\nimport {hostname, http_prefix} from \"../utils\";\nimport web_socket_connection from \"../web_socket\";\n\nclass Square extends React.Component {\n\n    render() {\n        let p = this.props.pixel\n        let color = `rgb(${p.r}, ${p.g}, ${p.b})`\n        let isSolid = this.props.pixel.g > 180\n        if (isSolid) {\n            color = `rgb(0, 80, 0)`\n        }\n        return <div style={{\n                width: \"50px\",\n                height: \"50px\",\n                left: `${50*(p.x-this.props.chunkPosition.x)}px`,\n                top: `${50*(p.y-this.props.chunkPosition.y)}px`,\n                backgroundColor: color,\n                position: \"absolute\"\n            }}/>\n    }\n}\n\nclass Chunk extends React.Component {\n    SIZE = 50;\n    chunk = {}\n\n    backgroundSquares() {\n        let pixels = []\n        // if(this.chunk.pixels === null || this.chunk.pixels === undefined) { return [] }\n        this.props.data.pixels.forEach(pixel => {\n\n            pixels.push(<Square\n                key={pixel.x+\"_\"+pixel.y}\n                pixel={pixel}\n                chunkPosition={{x:this.props.data.x, y:this.props.data.y}}\n            />)\n        })\n        return pixels\n    }\n\n    render() {\n        let x = this.props.x\n        let y = this.props.y\n        let size = 50;\n        let squaresTall = Math.ceil(window.innerHeight/size);\n        let squaresWide = Math.ceil(window.innerWidth/size);\n        let offsetX = -this.props.playerPosition.x + Math.floor(squaresWide/2)\n        let offsetY = -this.props.playerPosition.y + Math.floor(squaresTall/2)\n\n        return <div className=\"chunk\" style={{\n            // zIndex: \"0\",\n            position: \"absolute\",\n            border:\"solid thin black\",\n            width: `${this.SIZE*this.chunk.size}px`,\n            height: `${this.SIZE*this.chunk.size}px`,\n            backgroundColor: \"pink\",\n            left: size*(x+offsetX)+\"px\",\n            top: size*(y+offsetY)+\"px\",\n\n        }}>\n            <div className=\"squares\">{this.backgroundSquares()}</div>\n        </div>\n    }\n}\n\nclass Background extends React.Component {\n\n    CHUNKSIZE = 10\n\n    state = {\n        chunkData: {},\n        playerPosition: {x:0, y:0},\n    }\n    is_mounted = false\n\n    componentWillUnmount() {\n        this.is_mounted = false\n    }\n\n    componentDidMount(props) {\n        this.is_mounted = true\n        this.updateChunks()\n        web_socket_connection.objectEventBus.on(\"player_position\", (msg) => {\n            if(!this.is_mounted) return\n            let state = this.state\n            state.playerPosition = msg\n            this.setState(state)\n            this.updateChunks()\n        })\n\n    }\n\n    requestChunk(x, y) {\n        if (this.state.chunkData[`${x}_${y}`] !== undefined ){\n            return\n        }\n\n        // so we don't request again\n        let state = this.state\n        state.chunkData[`${x}_${y}`] = {pixels:[], objects:[]}\n        this.setState(state)\n\n        let url = `${http_prefix()}://${hostname()}/chunks?x=${x}&y=${y}`\n        fetch(url)\n            .then(res => res.json())\n            .then(chunkData => {\n                let state = this.state\n                state.chunkData[`${x}_${y}`] = chunkData\n                this.setState(state)\n            });\n    }\n\n    updateChunks(){\n        let size = 50;\n        let squaresTall = Math.ceil(window.innerHeight/size);\n        let squaresWide = Math.ceil(window.innerWidth/size);\n\n        let pp = this.state.playerPosition\n        let minX = Math.floor(pp.x - squaresWide/2)\n        let minY = Math.floor(pp.y - squaresTall/2)\n        let maxX = Math.ceil(pp.x + squaresWide/2)\n        let maxY = Math.ceil(pp.y + squaresTall/2)\n\n        minX = minX - minX%this.CHUNKSIZE - this.CHUNKSIZE\n        minY = minY - minY%this.CHUNKSIZE - this.CHUNKSIZE\n        maxX = maxX + maxX%this.CHUNKSIZE + this.CHUNKSIZE\n        maxY = maxY + maxY%this.CHUNKSIZE + this.CHUNKSIZE\n\n        let chunksWide = Math.ceil((maxX-minX)/this.CHUNKSIZE)\n        let chunksTall = Math.ceil((maxY-minY)/this.CHUNKSIZE)\n\n        let xIndex = [...Array(chunksWide).keys()]\n        let yIndex = [...Array(chunksTall).keys()]\n        xIndex.forEach(x => {\n            yIndex.forEach(y => {\n                if (this.state.chunkData[`${x}_${y}`] === undefined ){\n                    this.requestChunk(minX+x*this.CHUNKSIZE,minY+y*this.CHUNKSIZE)\n                }\n           })\n        })\n    }\n\n    isSolidAt(p){\n\n        let x = Math.floor(p.x/this.CHUNKSIZE)*this.CHUNKSIZE\n        let y = Math.floor(p.y/this.CHUNKSIZE)*this.CHUNKSIZE\n        let chunk = this.state.chunkData[`${x}_${y}`]\n        if(chunk === undefined) {\n            return false\n        }\n        let solid = false\n\n        chunk.pixels.forEach(pixel => {\n            if(Math.ceil(p.x) === pixel.x && Math.ceil(p.y) === pixel.y){\n                if(pixel.g > 180){\n                    solid = true\n                }\n            }\n        })\n\n        return solid\n    }\n\n    render() {\n        let chunks = [];\n        let keys = Object.keys(this.state.chunkData)\n        let playerPosition = this.state.playerPosition\n        keys.forEach(key => {\n            let chunkData = this.state.chunkData[key]\n            let chunk = <Chunk\n                x={chunkData.x}\n                y={chunkData.y}\n                key={key}\n                data={chunkData}\n                playerPosition={playerPosition}\n            />;\n            chunks.push(chunk)\n        })\n\n        return (<div id=\"chunks\">\n            {chunks}\n        </div>);\n    }\n}\n\nexport default Background","import React from \"react\";\nimport {hostname, http_prefix} from \"../utils\";\nimport web_socket_connection from \"../web_socket\";\n\n\nclass Monster extends React.Component {\n\n    state = {\n        monster: {x:0, y:0}\n    }\n    is_mounted = false\n\n    isSolid(){\n        return this.props.monster.solid\n    }\n\n    constructor(props) {\n        super(props);\n        this.state.monster = props.monster\n    }\n\n    componentWillUnmount() {\n        this.is_mounted = false\n    }\n    componentDidMount() {\n        this.is_mounted = true\n        web_socket_connection.objectEventBus.on(\"monster\", monster => {\n            if(!this.is_mounted) return\n            if(this.props.id === monster.id){\n                let state = this.state\n                state.monster = monster\n                this.setState(state)\n            }\n        })\n    }\n\n    render() {\n        let p = this.state.monster\n        let s = this.props.size\n        let x = p.x\n        let y = p.y\n        let size = 50;\n        let squaresTall = Math.ceil(window.innerHeight/size);\n        let squaresWide = Math.ceil(window.innerWidth/size);\n        let offsetX = -this.props.playerPosition.x + Math.floor(squaresWide/2)\n        let offsetY = -this.props.playerPosition.y + Math.floor(squaresTall/2)\n\n        let images = []\n        p.images.forEach(src => {\n            images.push(<img style={{\n                width: `${s}px`,\n                height: `${s}px`,\n                position: \"absolute\",\n                left: \"0px\",\n                top: \"0px\",\n            }}\n                 key={`${p.id}_img_${images.length}`}\n                 src={`${http_prefix()}://${hostname()}${src}`}\n                 alt={this.props.monster.type}\n            />)\n\n        })\n        let z = 0\n        if(this.props.monster.type===\"player\" && this.props.monster.health > 0){\n            z = 10\n        }\n\n        return <div style={{\n            position: \"absolute\",\n            width: s+\"px\",\n            height: s+\"px\",\n            zIndex: z,\n            left:s*(x+offsetX)+\"px\",\n            top:s*(y+offsetY)+\"px\",\n        }}>\n            {images}\n        </div>\n    }\n}\n\nclass Monsters extends React.Component {\n    SIZE = 50\n\n    state = {\n        monsters: {},\n        playerPosition: {x:0, y:0},\n    }\n    is_mounted = false\n\n    componentWillUnmount() {\n        this.is_mounted = false\n    }\n    componentDidMount() {\n        this.is_mounted = true\n        web_socket_connection.objectEventBus.on(\"monster\", m => {\n            if(!this.is_mounted) return\n\n            let state = this.state\n            if (m.action === \"remove\") {\n                delete state.monsters[m.id]\n            } else {\n                state.monsters[m.id] = m\n            }\n            this.setState(state)\n        })\n\n        web_socket_connection.objectEventBus.on(\"player_position\", (msg) => {\n            if(!this.is_mounted) return\n            let state = this.state\n            state.playerPosition = msg\n            this.setState(state)\n        })\n\n    }\n\n    isSolidAt(p){\n        let solid = false\n        Object.values(this.state.monsters).forEach(monster => {\n            if(Math.ceil(p.x) === monster.x && Math.ceil(p.y) === monster.y){\n                 solid = solid || monster.solid\n            }\n        })\n        return solid\n    }\n\n    render() {\n\n        let playerPosition = this.state.playerPosition\n        function makeObject(o, size) {\n            return <Monster\n                monster={o}\n                key={o.id}\n                id={o.id}\n                size={size}\n                playerPosition={playerPosition}\n            />\n        }\n\n        let objects = [];\n        Object.values(this.state.monsters).forEach(o => {\n            if(o.type !== \"player\"){\n                objects.push(makeObject(o, this.SIZE))\n            }\n        })\n        Object.values(this.state.monsters).forEach(o => {\n            if(o.type === \"player\"){\n                objects.push(makeObject(o, this.SIZE))\n            }\n        })\n        return <div className=\"monsters\">\n            {objects}\n        </div>\n    }\n\n\n}\n\nexport default Monsters","import React from \"react\";\nimport web_socket_connection from \"../web_socket\";\nimport {hostname, http_prefix} from \"../utils\";\n\n\nclass Item extends React.Component {\n\n    state = {\n        item: {x: 0, y: 0},\n    }\n    is_mounted = false\n\n    constructor(props) {\n        super(props);\n        this.state.item = props.item\n    }\n\n    componentWillUnmount() {\n        this.is_mounted = false\n    }\n    componentDidMount() {\n        this.is_mounted = true\n\n        web_socket_connection.objectEventBus.on(\"item\", item => {\n            if(!this.is_mounted) return\n            if (this.props.id === item.id) {\n                let state = this.state\n                state.item = item\n                this.setState(state)\n            }\n        })\n    }\n\n    render(){\n        if(this.state.item.is_carried){\n            return null\n        }\n\n        let p = this.state.item\n        let s = this.props.size\n        let x = p.x\n        let y = p.y\n        let size = 50;\n        let squaresTall = Math.ceil(window.innerHeight/size);\n        let squaresWide = Math.ceil(window.innerWidth/size);\n        let offsetX = -this.props.playerPosition.x + Math.floor(squaresWide/2)\n        let offsetY = -this.props.playerPosition.y + Math.floor(squaresTall/2)\n\n        return <div style={{\n            position: \"absolute\",\n            width: s+\"px\",\n            height: s+\"px\",\n            zIndex: 0,\n            left:s*(x+offsetX)+\"px\",\n            top:s*(y+offsetY)+\"px\",\n        }}>\n            <img style={{\n                width: `${s}px`,\n                height: `${s}px`,\n                position: \"absolute\",\n                left: \"0px\",\n                top: \"0px\",\n            }}\n            src={`${http_prefix()}://${hostname()}${this.props.item.dropped_image}`}\n            alt={this.props.item.type}\n            />\n        </div>\n    }\n}\n\nclass Items extends React.Component {\n    SIZE = 50\n\n    state = {\n        items: {},\n        playerPosition: {x: 0, y: 0},\n    }\n    is_mounted = false\n\n    componentWillUnmount() {\n        this.is_mounted = false\n    }\n    componentDidMount() {\n        this.is_mounted = true\n        web_socket_connection.objectEventBus.on(\"item\", item => {\n            if(!this.is_mounted) return\n            let state = this.state\n            if (item.action === \"remove\") {\n                delete state.items[item.id]\n            } else {\n                state.items[item.id] = item\n            }\n            this.setState(state)\n        })\n\n        web_socket_connection.objectEventBus.on(\"player_position\", (msg) => {\n            if(!this.is_mounted) return\n            let state = this.state\n            state.playerPosition = msg\n            this.setState(state)\n        })\n\n    }\n\n    render() {\n\n        let playerPosition = this.state.playerPosition\n        function makeObject(o, size) {\n            return <Item\n                item={o}\n                key={o.id}\n                id={o.id}\n                size={size}\n                playerPosition={playerPosition}\n            />\n        }\n\n        let objects = [];\n        Object.values(this.state.items).forEach(o => {\n            if(o.type !== \"player\"){\n                objects.push(makeObject.bind(this)(o, this.SIZE, this.props.objectEventBus))\n            }\n        })\n        Object.values(this.state.items).forEach(o => {\n            if(o.type === \"player\"){\n                objects.push(makeObject(o, this.SIZE, this.props.objectEventBus))\n            }\n        })\n        return <div className=\"objects\">\n            {objects}\n        </div>\n    }\n\n\n}\n\nexport default Items","import React from \"react\";\nimport web_socket_connection from \"../web_socket\"\nimport { DndProvider,DragPreviewImage } from 'react-dnd'\nimport { HTML5Backend } from 'react-dnd-html5-backend'\nimport { useDrag } from 'react-dnd'\nimport { useDrop } from 'react-dnd'\nimport {hostname, http_prefix} from \"../utils\";\nimport KeyboardEventHandler from \"react-keyboard-event-handler\";\n\nconst SlotTypes = {\n    1: \"s1\",\n    2: \"s2\",\n    3: \"s3\",\n    4: \"s4\",\n    5: \"s5\",\n    6: \"s6\",\n    7: \"s7\",\n    8: \"s8\",\n    BACKPACK: \"backpack\",\n    GROUND: \"ground\",\n}\n\nclass PlayerEditor extends React.Component {\n\n    state = {\n        items: [],\n    }\n\n    constructor(props) {\n        super(props);\n        web_socket_connection.sendBackpackRequest()\n    }\n    is_mounted = false\n\n    componentWillUnmount() {\n        this.is_mounted = false\n    }\n    componentDidMount() {\n        this.is_mounted = true\n        web_socket_connection.objectEventBus.on(\"item\", item => {\n            if (!this.is_mounted) return\n            let state = this.state\n            state.items[item.id] = item\n            this.setState(state)\n        })\n    }\n\n    equippedItems(){\n        let items = []\n        Object.values(this.state.items).forEach(item => {\n            console.log(item)\n            if(item.is_carried && item.is_equipped){\n                items.push(item)\n            }\n        })\n        console.log(\"equipped\", items)\n        return items\n    }\n\n    backpackItems(){\n        let items = []\n        Object.values(this.state.items).forEach(item => {\n            if(item.is_carried && !item.is_equipped){\n                items.push(item)\n            }\n        })\n        console.log(\"backpack\", items)\n        return items\n    }\n\n    groundItems(){\n        let items = []\n        Object.values(this.state.items).forEach(item => {\n            if(!item.is_carried && !item.is_equipped){\n                items.push(item)\n            }\n        })\n        console.log(\"ground\", items)\n        return items\n    }\n\n\n    render() {\n        console.log(\"all_items\", this.state.items)\n        return <>\n            <div style={{textAlign:\"center\"}}>\n                <div style={{float:\"left\", width:\"300px\"}}>Equipped</div>\n                <div style={{float:\"left\", width:\"300px\"}}>Backpack</div>\n                <div style={{float:\"left\", width:\"300px\"}}>Ground</div>\n            </div>\n            <div  style={{top:\"20px\", position: \"absolute\"}} >\n                <DndProvider backend={HTML5Backend}>\n                    <PlayerEditorEquip items={this.equippedItems()} />\n                    <Backpack items={this.backpackItems()} />\n                    <Ground items={this.groundItems()} />\n                </DndProvider>\n            </div>\n            <KeyboardEventHandler\n                handleKeys={[\"esc\", \"e\"]}\n                onKeyEvent={(key, e) => {\n                    this.props.app.setPage(\"game\")\n                }}\n            />\n        </>\n    }\n}\n\n\nfunction DraggableItem(props) {\n    console.log(\"draggable\", props.item)\n    const [{ isDragging }, drag, preview] = useDrag({\n        item: { type: SlotTypes[props.item.allowed_slot] },\n        end: (item, monitor) => {\n            const dropResult = monitor.getDropResult()\n            if (item && dropResult) {\n                if(dropResult.name === \"backpack\") {\n                    web_socket_connection.unequipItem(props.item.id)\n                } else if(dropResult.name === \"ground\"){\n                    web_socket_connection.dropItem(props.item.id)\n                } else {\n                    web_socket_connection.equipItem(props.item.id)\n                }\n            }\n        },\n        collect: (monitor) => ({\n            isDragging: monitor.isDragging(),\n        }),\n    })\n    return <>\n        <DragPreviewImage connect={preview} src={props.item.dropped_image} />\n        <div ref={drag} style={{...props.style}}>\n            <img src={`${http_prefix()}://${hostname()}/${props.item.dropped_image}`} alt={props.item.name} />\n        </div>\n    </>\n}\n\n\nfunction ItemSlot(props) {\n    const [{ canDrop, isOver }, drop] = useDrop({\n        accept: SlotTypes[props.slot],\n        drop: () => ({ name: `slot ${props.slot}` }),\n        collect: (monitor) => ({\n            isOver: monitor.isOver(),\n            canDrop: monitor.canDrop(),\n        }),\n    })\n    const isActive = canDrop && isOver\n    let backgroundColor = '#222'\n    if (isActive) {\n        backgroundColor = 'darkgreen'\n    } else if (canDrop) {\n        backgroundColor = 'darkkhaki'\n    }\n\n    let item = null\n    if(props.item !== undefined) {\n        item = <DraggableItem item={props.item} style={{...props.style, top:\"10px\", left:\"10px\"}}/>\n    }\n\n    return <>\n        <div ref={drop} style={{...props.style, backgroundColor }}>\n            <img style={{\n                width:\"50px\",\n                height: \"50px\",\n            }}\n                 src={`${http_prefix()}://${hostname()}/images/gui/tab_unselected.png`}\n                 alt={`slot ${props.slot}`}\n            />\n        </div>\n        {item}\n    </>\n}\n\n\nfunction BackpackSlot(props) {\n    const [{ canDrop, isOver }, drop] = useDrop({\n        accept: Object.values(SlotTypes),\n        drop: () => ({ name: `backpack` }),\n        collect: (monitor) => ({\n            isOver: monitor.isOver(),\n            canDrop: monitor.canDrop(),\n        }),\n    })\n    const isActive = canDrop && isOver\n    let backgroundColor = '#222'\n    if (isActive) {\n        backgroundColor = 'darkgreen'\n    } else if (canDrop) {\n        backgroundColor = 'darkkhaki'\n    }\n\n    let item = null\n\n    return <>\n        <div ref={drop} style={{width:\"100%\", height:\"100%\", border:\"solid thin black\", backgroundColor }}>\n        </div>\n        {item}\n    </>\n}\n\nfunction GroundSlot(props) {\n    const [{ canDrop, isOver }, drop] = useDrop({\n        accept: Object.values(SlotTypes),\n        drop: () => ({ name: `ground` }),\n        collect: (monitor) => ({\n            isOver: monitor.isOver(),\n            canDrop: monitor.canDrop(),\n        }),\n    })\n    const isActive = canDrop && isOver\n    let backgroundColor = '#222'\n    if (isActive) {\n        backgroundColor = 'darkgreen'\n    } else if (canDrop) {\n        backgroundColor = 'darkkhaki'\n    }\n\n    let item = null\n\n    return <>\n        <div ref={drop} style={{width:\"100%\", height:\"100%\", border:\"solid thin black\", backgroundColor }}>\n        </div>\n        {item}\n    </>\n}\n\nfunction Backpack(props) {\n    let items = []\n    Object.values(props.items).forEach( item => {\n        items.push(<DraggableItem item={item} key={item.id}/>)\n    })\n    return <div style={{left:\"300px\", width: \"300px\", height: \"290px\", position: \"absolute\", border: \"solid thin black\"}}>\n        <BackpackSlot />\n        <div style={{position:\"absolute\", top:0, left:0}}>\n            {items}\n        </div>\n    </div>\n}\n\nfunction PlayerEditorEquip(props) {\n    let silhouette_style = {\n        position: \"absolute\",\n        width: \"200px\",\n        height: \"200px\",\n        left:\"50px\",\n        top: \"40px\"\n    }\n    let items = {}\n    let equipped_items = []\n    Object.values(props.items).forEach(item => {\n        items[item.allowed_slot] = item\n        equipped_items.push(\n            <img style={silhouette_style}\n                 src={`${http_prefix()}://${hostname()}/${item.equipped_image}`}\n                 alt=\"silhouette\"\n            />\n        )\n    })\n\n    return <div style={{width:\"300px\", height:\"290px\", position:\"absolute\", border: \"solid thin black\"}}>\n        <img style={silhouette_style}\n             src={`${http_prefix()}://${hostname()}/images/player/base/human_m.png`}\n             alt=\"silhouette\"\n        />\n        {equipped_items}\n\n        <ItemSlot style={{position: \"absolute\", left: \"0px\"}} slot={1} item={items[1]}/>\n        <ItemSlot style={{position: \"absolute\", transform: \"scaleX(-1)\", right: \"0px\"}} slot={2} item={items[2]}/>\n\n        <div style={{position: \"absolute\", top:\"80px\", width:\"100%\"}}>\n            <ItemSlot style={{position: \"absolute\", left: \"0px\"}} slot={3} item={items[3]}/>\n            <ItemSlot style={{position: \"absolute\", transform: \"scaleX(-1)\", right: \"0px\"}} slot={4} item={items[4]}/>\n        </div>\n\n        <div style={{position: \"absolute\", top:\"160px\", width:\"100%\"}}>\n            <ItemSlot style={{position: \"absolute\", left: \"0px\"}} slot={5}/>\n            <ItemSlot style={{position: \"absolute\", transform: \"scaleX(-1)\", right: \"0px\"}} slot={6}/>\n        </div>\n\n        <div style={{position: \"absolute\", top:\"240px\", width:\"100%\"}}>\n            <ItemSlot style={{position: \"absolute\", left: \"0px\"}} slot={7}/>\n            <ItemSlot style={{position: \"absolute\", transform: \"scaleX(-1)\", right: \"0px\"}} slot={8}/>\n        </div>\n\n    </div>\n}\n\nfunction Ground(props){\n    let items = []\n    Object.values(props.items).forEach( item => {\n        items.push(<DraggableItem item={item} key={item.id}/>)\n    })\n    return <div style={{left:\"600px\", width: \"300px\", height: \"290px\", position: \"absolute\", border: \"solid thin black\"}}>\n        <GroundSlot />\n        <div style={{position:\"absolute\", top:0, left:0}}>\n            {items}\n        </div>\n    </div>\n}\n\nexport default PlayerEditor","import React from 'react';\nimport GoogleLogin from 'react-google-login';\nimport './App.css';\nimport {Player} from \"./components/player\";\nimport Background from \"./components/background\";\nimport Monsters from \"./components/monsters\";\nimport Items from \"./components/items\";\nimport PlayerEditor from \"./components/player_editor\";\nimport web_socket_connection from \"./web_socket\"\n\nclass App extends React.Component {\n\n    state = {\n        accessToken: null,\n        googleId: null,\n        email: \"\",\n        firstName: \"\",\n        lastName: \"\",\n        page: \"game\",\n    }\n\n    constructor(props) {\n        super(props);\n        this.background = React.createRef();\n        this.monsters = React.createRef();\n        this.items = React.createRef();\n        this.player = React.createRef();\n    }\n\n    loginSuccess(data){\n        let state = this.state\n        state.accessToken = data.accessToken\n        state.googleId = data.googleId\n        state.firstName = data.profileObj.givenName\n        state.lastName = data.profileObj.familyName\n        state.email = data.profileObj.email\n        web_socket_connection.sendAccessToken(state.accessToken, state.googleId, state.email, state.firstName, state.lastName)\n        this.setState(state)\n    }\n\n    renderLogin() {\n        return <div style={{margin:\"auto\", width:\"200px\", paddingTop:\"200px\"}}>\n            <GoogleLogin\n                clientId=\"662193159992-4fv4hq3q25mkerlt0eqqr1ii670ogugr.apps.googleusercontent.com\"\n                onSuccess={this.loginSuccess.bind(this)}\n                isSignedIn={true}\n            />\n        </div>\n    }\n\n    setPage(name){\n        let state = this.state\n        state.page = name\n        console.log(state)\n        this.setState(state)\n    }\n\n    renderGame() {\n        let size = 50;\n        return <>\n            <Background\n                size={size}\n                ref={this.background}\n                app={this}\n            />\n            <Monsters\n                size={size}\n                // player={this.player}\n                ref={this.monsters}\n            />\n            <Items\n                size={size}\n                // player={this.player}\n                ref={this.items}\n            />\n            <Player\n                size={size}\n                background={this.background}\n                items={this.items}\n                ref={this.player}\n                app={this}\n                accessToken={this.state.accessToken}\n                googleId={this.state.googleId}\n                email={this.state.email}\n                firstName={this.state.firstName}\n                lastName={this.state.lastName}\n            />\n        </>;\n    }\n\n    renderInventory(){\n        return <PlayerEditor\n            app={this}\n            player={this.player}\n            accessToken={this.state.accessToken}\n            googleId={this.state.googleId}\n            email={this.state.email}\n            firstName={this.state.firstName}\n            lastName={this.state.lastName}\n        />\n    }\n\n    render(){\n        if(this.state.accessToken === null)\n            return this.renderLogin()\n        if(this.state.page===\"game\")\n            return this.renderGame()\n        if(this.state.page===\"inventory\")\n            return this.renderInventory()\n        return null\n    }\n\n\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}